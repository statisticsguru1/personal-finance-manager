% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/helpers.R
\name{with_account_lock}
\alias{with_account_lock}
\title{Acquire a Lock for a User's Account Tree using Plugin-Based File Access}
\usage{
with_account_lock(user_id, expr, timeout = 1800)
}
\arguments{
\item{user_id}{The user ID whose account tree should be locked.}

\item{expr}{An expression to evaluate within the lock.}

\item{timeout}{Maximum time in seconds to wait for the lock. Default is 1800.}
}
\value{
Returns the result of evaluating `expr`.
}
\description{
Ensures exclusive access to a user's account tree by creating a lock file.
Waits until the lock is released or a timeout is reached. Uses the plugin
architecture to support multiple storage backends.
}
